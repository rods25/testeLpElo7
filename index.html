<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Teste de Programação Elo7</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=2.0">
    <link href="src/css/reset.css" type="text/css" rel="stylesheet">
    <link href="src/css/styles.css" type="text/css" rel="stylesheet">
</head>
<body>
    <section id="header">
        <div class="container">
            <div class="header header_bg-work">
                <h1>Trabalhe no Elo7</h1>
            </div>
    
            <div class="header header_title">
                <p>
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Facere aperiam reprehenderit laboriosam repellendus, voluptatibus dolorem repudiandae beatae, quo, cupiditate delectus quos amet numquam. Ex, laborum fuga ipsa sint quia expedita.
                </p>
            </div>
            <hr/>
            <a href="#stack" class="go-to-jobs">Vagas em aberto <span class="icon">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="12.000000pt" height="12.000000pt" viewBox="0 0 12.000000 12.000000" preserveAspectRatio="xMidYMid meet">
                    <g transform="translate(0.000000,12.000000) scale(0.002344,-0.002344)"
                    fill="#359c9c" stroke="none">
                        <path d="M327 4552 c-180 -180 -327 -332 -327 -337 0 -5 370 -380 822 -832
                        l823 -823 -823 -823 c-452 -452 -822 -827 -822 -832 0 -6 147 -157 328 -338
                        l327 -327 1160 1160 1160 1160 -1160 1160 -1160 1160 -328 -328z"/>
                        <path d="M2477 4552 c-180 -180 -327 -332 -327 -337 0 -5 370 -380 822 -832
                        l823 -823 -823 -823 c-452 -452 -822 -827 -822 -832 0 -6 147 -157 328 -338
                    l327 -327 1160 1160 1160 1160 -1160 1160 -1160 1160 -328 -328z"/>
                    </g>
                </svg>
            </span></a>
        </div>
    </section>
    
    <section id="squad">
        <div class="container">
            <div class="squad_fst-item">
                <div class="video">
                    <img loading="lazy" src="src/img/placeholder-video.png" alt="" class="placeholder">
                </div>
                <div class="text">
                    <h2>Palavra do CEO <br><span class="author">Carlos Curioni</span></h2>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quasi vel blanditiis, exercitationem non dolore quisquam architecto expedita ea voluptatem. Aperiam, totam ad! Soluta beatae incidunt maiores accusamus hic laboriosam tenetur.</p>
                </div>
            </div>
            <div class="squad_scd-item">
                <h2 class="title">Conheça nosso time <br>fora de série</h2>
                <div class="dream-team">
                    <img loading="lazy" src="src/img/camila.png" alt="">
                    <img loading="lazy" src="src/img/guto.png" alt="">
                    <img loading="lazy" src="src/img/david.png" alt="">
                    <img loading="lazy" src="src/img/beatriz.png" alt="">
                </div>
            </div>
        </div>
    </section>

    <section id="workplace">
        <div class="container">
            <ul>
                <li>
                    <img loading="lazy" src="src/img/qualidade.png" alt="">
                    <h2>Qualidade de vida</h2>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat voluptatibus repellat id itaque officia. Nobis ex quos aperiam adipisci commodi</p>
                </li>
                <li>
                    <img loading="lazy" src="src/img/descontracao.png" alt="">
                    <h2>Ambiente descontraído</h2>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat voluptatibus repellat id itaque officia. Nobis ex quos aperiam adipisci commodi, dicta quas consectetur porro voluptate numquam voluptates expedita, placeat reiciendis. Quaerat voluptatibus repellat id itaque officia. Nobis ex quos aperiam adipisci commodi</p>
                </li>
                <li>
                    <img loading="lazy" src="src/img/atividades.png" alt="">
                    <h2>Atividades extras</h2>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat voluptatibus repellat id itaque officia. Nobis ex quos aperiam adipisci commodi, dicta quas consectetur porro voluptate numquam voluptates expedita, placeat reiciendis.</p>
                </li>
            </ul>
            <hr>
            <a href="" class="know-more">Saiba mais <span class="icon">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="12.000000pt" height="12.000000pt" viewBox="0 0 12.000000 12.000000" preserveAspectRatio="xMidYMid meet">
                    <g transform="translate(0.000000,12.000000) scale(0.002344,-0.002344)"
                    fill="#359c9c" stroke="none">
                        <path d="M327 4552 c-180 -180 -327 -332 -327 -337 0 -5 370 -380 822 -832
                        l823 -823 -823 -823 c-452 -452 -822 -827 -822 -832 0 -6 147 -157 328 -338
                        l327 -327 1160 1160 1160 1160 -1160 1160 -1160 1160 -328 -328z"/>
                        <path d="M2477 4552 c-180 -180 -327 -332 -327 -337 0 -5 370 -380 822 -832
                        l823 -823 -823 -823 c-452 -452 -822 -827 -822 -832 0 -6 147 -157 328 -338
                    l327 -327 1160 1160 1160 1160 -1160 1160 -1160 1160 -328 -328z"/>
                    </g>
                </svg>
            </span></a>
            <img loading="lazy" src="src/img/foto-bottom.png" alt="">
        </div>
    </section>

    <section id="stack">
        <div class="container stack">
            <h2>Vagas em aberto</h2>
            <h3>Desenvolvimento</h3>
            <p class="loading ativo">
                Carregando vagas
            </p>
            <ul class="jobs"></ul>
        </div>
    </section>

    <script>
        // Formata e envia os dados tratados para o template.
        let formatJobsData = function(list) {
            // Callback em caso de uma lista vazia ou undefined
            if(!list) {
                return document.querySelector('#stack .jobs').innerHTML = '<li class="errorMessage">Desculpe, tivemos problemas ao carregar as vagas de desenvolvimento disponíveis. <br>Atualize a página, por favor :)</li>';
            }

            list.forEach(job => {
                if(job.ativa) {
                    let initLine = `<li><a href="${job.link}" target="_blank" rel="noopener noreferrer">${job.cargo}`,
                        hasLocation = job.localizacao ? `<span class="location">${job.localizacao.bairro} - ${job.localizacao.cidade}, ${job.localizacao.pais}</span></a></li>` : `<span class="location">Remoto</span></a></li>`,
                        fullLine = initLine += hasLocation;

                        document.querySelector('#stack .jobs').innerHTML += fullLine;
                }
            });
        
            document.querySelector('.loading.ativo').classList.remove('ativo');

        };
        
        // Para simular cenário de erro, favor colocar uma url inválida
        let xhr = new XMLHttpRequest();
        xhr.open("GET", "https://www.mocky.io/v2/5d6fb6b1310000f89166087b", true);
        xhr.onload = function() {
            let response = xhr.responseText,
                jobsList = !response ? {} : JSON.parse(response);

            formatJobsData(jobsList.vagas);
        };
        xhr.send();        
    </script>
</body>